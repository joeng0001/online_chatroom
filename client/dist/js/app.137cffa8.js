(function(){"use strict";var e={5245:function(e,t,o){var s=o(9242),l=o(3396);const a={id:"app"};function r(e,t,o,s,r,i){const n=(0,l.up)("chat_header"),d=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",a,[(0,l.Wm)(n),(0,l.Wm)(d)])}function i(e,t,o,s,a,r){const i=(0,l.up)("v-btn"),n=(0,l.up)("v-toolbar-items"),d=(0,l.up)("v-spacer"),u=(0,l.up)("v-toolbar");return(0,l.wg)(),(0,l.j4)(u,{color:"cyan-lighten-3",align:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[e.$store.state.loginStatus?((0,l.wg)(),(0,l.j4)(i,{key:0,color:"blue",to:{name:"Home"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Home Page ")])),_:1})):((0,l.wg)(),(0,l.j4)(i,{key:1,color:"blue",to:{name:"Login_page"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Login Page ")])),_:1}))])),_:1}),(0,l.Wm)(n,{style:{"padding-left":"200px"}},{default:(0,l.w5)((()=>[e.$store.state.loginStatus?((0,l.wg)(),(0,l.j4)(i,{key:0,to:{name:"user"},class:"light"},{default:(0,l.w5)((()=>[(0,l.Uk)(" user_list ")])),_:1})):(0,l.kq)("",!0),e.$store.state.loginStatus?((0,l.wg)(),(0,l.j4)(i,{key:1,to:{name:"room_list"},class:"light"},{default:(0,l.w5)((()=>[(0,l.Uk)(" room_list ")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(d)])),_:1}),(0,l.Wm)(d),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[e.$store.state.loginStatus?((0,l.wg)(),(0,l.j4)(i,{key:0,color:"#3700B3",depressed:"",style:{right:"0px"},onClick:r.logout},{default:(0,l.w5)((()=>[(0,l.Uk)(" log out ")])),_:1},8,["onClick"])):(0,l.kq)("",!0)])),_:1})])),_:1})}o(7658);var n=o(4311),d=n.Z.create({baseURL:"http://localhost:8089/",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},timeout:500});const u={strict:!0,plugins:[],state:{token:null,userID:null,loginStatus:!1},socket:{},mutations:{setToken(e,t){e.token=t,e.loginStatus=!!t,localStorage.setItem("token",t)},setUserID(e,t){e.userID=t,localStorage.setItem("userID",t)},setLoginStatus(e,t){e.loginStatus=t,localStorage.setItem("status",t)}},actions:{setToken({commit:e},t){e("setToken",t)},setUserID({commit:e},t){e("setUserID",t)},setLoginStatus({commit:e},t){e("setLoginStatus",t)}}};var c=u;class _{get_chat_record(e){return e.jwt=c.state.token,d.put("/chat_record",e)}add_chat_record(e){return e.jwt=c.state.token,d.post("/chat_record",e)}delete_chat_record(e){return e.jwt=c.state.token,d.put("/chat_record_deletion",e)}findall_user(){return d.get("/user")}delete_user(e){return e.jwt=c.state.token,d.post("/user",e)}edit_user(e){return e.jwt=c.state.token,d.post("/user_edition",e)}get_room_list(e){return e.jwt=c.state.token,d.post("/chat_room",e)}login(e){return d.post("/login",e)}Register(e){return d.post("/register",e)}create_chatroom(e){return e.jwt=c.state.token,d.post("/chat_room_creation",e)}edit_chatroom(e){return e.jwt=c.state.token,d.post("/chat_room_edition",e)}remove_chatroom(e){return e.jwt=c.state.token,d.put("/chat_room",e)}user_offline(e){return e.jwt=c.state.token,d.put("/user",e)}add_online_account(e){return e.jwt=c.state.token,d.put("login",e)}}var m=new _,h={methods:{logout(){var e={id:this.$store.state.userID,online:!1};this.$store.socket.emit("user_offline",e),m.user_offline({id:this.$store.state.userID}).catch((e=>{console.error(e.message)})),this.$store.socket.close(),this.$store.dispatch("setToken",null),this.$store.dispatch("setUserID",null),this.$store.dispatch("setLoginStatus",!1),this.$router.push({path:"/"})}}},p=o(89);const g=(0,p.Z)(h,[["render",i],["__scopeId","data-v-2e09106e"]]);var w=g,f=o(2066),v={name:"App",components:{chat_header:w},beforeCreate(){this.$store.dispatch("setToken",localStorage.getItem("token")),this.$store.dispatch("setUserID",parseInt(localStorage.getItem("userID"))),this.$store.dispatch("setLoginStatus","true"==localStorage.getItem("status")),this.$store.socket=(0,f.io)("http://localhost:8089");const e={id:this.$store.state.userID};m.add_online_account(e).then((e=>{console.log(e.message)})).catch((e=>{console.error(e.message)}))},created(){window.addEventListener("beforeunload",this.leaving)},methods:{leaving(){this.$store.state.loginStatus&&(m.user_offline({id:this.$store.state.userID}).then((e=>{console.log(e.message)})).catch((e=>{console.error(e.message)})),this.$store.socket.close())}}};const k=(0,p.Z)(v,[["render",r]]);var b=k,y=o(2483);const W=e=>((0,l.dD)("data-v-01b572b6"),e=e(),(0,l.Cn)(),e),D=W((()=>(0,l._)("br",null,null,-1))),C=W((()=>(0,l._)("br",null,null,-1))),U=W((()=>(0,l._)("div",{class:"danger-alert"},null,-1))),V=W((()=>(0,l._)("br",null,null,-1)));function I(e,t,o,s,a,r){const i=(0,l.up)("v-text-field"),n=(0,l.up)("v-icon"),d=(0,l.up)("v-btn"),u=(0,l.up)("panel");return(0,l.wg)(),(0,l.j4)(u,{title:"Login",style:{}},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{label:"username",modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),class:"input"},null,8,["modelValue"]),D,(0,l.Wm)(i,{label:"Password",type:r.pw_type,modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),class:"input"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"right",onClick:r.toggle_pw_view},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-eye-outline ")])),_:1},8,["onClick"])])),_:1},8,["type","modelValue"]),C,U,V,(0,l.Wm)(d,{class:"btn",onClick:r.login},{default:(0,l.w5)((()=>[(0,l.Uk)(" Login ")])),_:1},8,["onClick"]),(0,l.Uk)("   "),(0,l.Wm)(d,{class:"btn",onClick:r.to_register},{default:(0,l.w5)((()=>[(0,l.Uk)(" Registration ")])),_:1},8,["onClick"]),(0,l.Uk)("   "),(0,l.Wm)(d,{class:"btn",onClick:r.bypass_login_for_testing},{default:(0,l.w5)((()=>[(0,l.Uk)(" bypass login for demo ")])),_:1},8,["onClick"])])),_:1})}var $=o(7139);const j={class:"box"};function S(e,t,o,s,a,r){const i=(0,l.up)("v-toolbar-title"),n=(0,l.up)("v-toolbar");return(0,l.wg)(),(0,l.iD)("div",j,[(0,l.Wm)(n,{class:"toolbar"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,$.zw)(o.title),1)])),_:1})])),_:1}),(0,l._)("div",null,[(0,l.WI)(e.$slots,"default",{},(()=>[(0,l.Uk)(" No Centent Defined ")]),!0)])])}var x={props:["title"]};const R=(0,p.Z)(x,[["render",S],["__scopeId","data-v-6138f4d3"]]);var O=R,z={name:"Login",data(){return{msg:"Welcome to Your Vue.js App",username:"",password:"",pw_view:!1}},components:{panel:O},computed:{pw_type(){return this.pw_view?"text":"password"}},methods:{login(){m.login({name:this.username,password:this.password}).then((e=>{this.$store.dispatch("setToken",e.data.token),this.$store.dispatch("setUserID",e.data.user_id),this.$store.dispatch("setLoginStatus",!0),this.$store.socket=(0,f.io)("http://localhost:8089"),this.$router.push("/home")})).then((()=>{var e={id:this.$store.state.userID,online:!0,jwt:this.$store.state.toekn};this.$store.socket.emit("user_online",e),this.$store.socket.on("error",(e=>{console.error(e)}))})).catch((e=>{console.error(e.message)}))},bypass_login_for_testing(){this.$store.dispatch("setUserID","0"),this.$store.dispatch("setLoginStatus",!0),this.$store.socket=(0,f.io)("http://localhost:8089"),this.$router.push("/home")},toggle_pw_view(){this.pw_view=!this.pw_view},to_register(){this.$router.push("/registration_page")}}};const q=(0,p.Z)(z,[["render",I],["__scopeId","data-v-01b572b6"]]);var L=q;function T(e,t,o,a,r,i){const n=(0,l.up)("Home"),d=(0,l.up)("v-card-subtitle"),u=(0,l.up)("v-card-text"),c=(0,l.up)("v-card"),_=(0,l.up)("v-col"),m=(0,l.up)("v-row"),h=(0,l.up)("v-container"),p=(0,l.up)("v-icon"),g=(0,l.up)("v-text-field");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(n,{class:"room_list"}),(0,l.Wm)(h,{class:"container",id:"container"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.messages,(e=>((0,l.wg)(),(0,l.j4)(m,{key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[e.publisherID!==this.$store.state.userID?((0,l.wg)(),(0,l.j4)(c,{key:0,class:"card"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,$.zw)(i.find_by_id(e.publisherID)),1)])),_:2},1024),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,$.zw)(e.content),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[e.publisherID===this.$store.state.userID?((0,l.wg)(),(0,l.j4)(c,{key:0,class:"card"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,$.zw)(i.find_by_id(e.publisherID)),1)])),_:2},1024),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,$.zw)(e.content),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,l._)("div",null,[(0,l.Wm)(g,{placeholder:"input there",modelValue:r.chat,"onUpdate:modelValue":t[1]||(t[1]=e=>r.chat=e),onKeypress:(0,s.D2)(i.send_chat,["enter"]),class:"chat_box"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{onClick:t[0]||(t[0]=e=>i.send_chat()),class:"btn","x-large":""},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-arrow-right-bold ")])),_:1})])),_:1},8,["modelValue","onKeypress"])])],64)}o(541);function H(e,t,o,s,a,r){const i=(0,l.up)("v-pagination"),n=(0,l.up)("v-card"),d=(0,l.up)("v-divider"),u=(0,l.up)("v-col"),c=(0,l.up)("v-row"),_=(0,l.up)("v-container");return(0,l.wg)(),(0,l.j4)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:a.page,"onUpdate:modelValue":t[0]||(t[0]=e=>a.page=e),length:Math.ceil(a.room_list.length/5)},null,8,["modelValue","length"]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.curr_display_room_list,(e=>((0,l.wg)(),(0,l.j4)(c,{key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[e.active_status?((0,l.wg)(),(0,l.j4)(n,{key:0,title:`${e.id}`,subtitle:`${e.room_admin}`,text:`${e.welcome_msg}`,to:{name:"chatroom",query:{room_id:e.id}},class:"card"},null,8,["title","subtitle","text","to"])):(0,l.kq)("",!0),(0,l.Wm)(d)])),_:2},1024)])),_:2},1024)))),128))])),_:1})}var P={data(){return{room_list:[],curr_display_room_list:[],page:1}},created(){this.get_room_list()},watch:{page:{handler(e,t){this.curr_display_room_list=this.room_list.slice(5*e-5,5*e)},immediate:!0}},methods:{async get_room_list(){await m.get_room_list({}).then((e=>{this.room_list=e.data,this.curr_display_room_list=this.room_list.slice(0,5)})).catch((e=>{console.error(e.message)})),this.curr_display_room_list.unshift({id:0,room_name:"sample_room",room_admin:"sample_user",active_status:!0,welcome_msg:"sample chatroom"})}}};const Z=(0,p.Z)(P,[["render",H],["__scopeId","data-v-dea985d2"]]);var N=Z,A={data(){return{messages:[],chat:"",socket:null,room_id:1,user_lists:[]}},components:{Home:N},created(){this.room_id=this.$route.query.room_id,this.get_chat_record(this.room_id),this.findall_user(),this.socket=this.$store.socket},mounted(){this.socket.on("message",(e=>{e.room_id===this.room_id&&this.messages.push(e),e.publisherID===this.$store.state.userID&&this.$nextTick((()=>{var e=document.getElementById("container");e.scrollTop=e.scrollHeight}))}))},watch:{"$route.query.room_id":{handler(e,t){this.room_id=e,this.get_chat_record(this.room_id)},deep:!0}},methods:{find_by_id(e){const t=this.user_lists.find((t=>String(t.id)===String(e)));return void 0===t?"anonymous":t.name},async findall_user(){await m.findall_user().then((e=>{this.user_lists=e.data})).catch((e=>{console.error(e.message)})),"0"===this.room_id&&this.user_lists.unshift({id:0,name:"sample_user",online:!0,active_status:!0})},get_chat_record(e){var t={room_id:e};m.get_chat_record(t).then((e=>{this.messages=e.data})).catch((e=>{console.error(e.message)}))},send_chat(){var e={content:this.chat,publisherID:this.$store.state.userID,room_id:this.room_id,chat_target:"anyone",description:"my first chat"};if("0"===this.room_id)return e.type="new_chat",this.socket.emit("message",e),void(this.chat="");m.add_chat_record(e).then((t=>{e.type="new_chat",this.socket.emit("message",e),this.chat=""})).catch((e=>{console.error(e.message)}))}}};const E=(0,p.Z)(A,[["render",T],["__scopeId","data-v-1ac1871f"]]);var M=E;const Y=e=>((0,l.dD)("data-v-0bb0f31c"),e=e(),(0,l.Cn)(),e),K=Y((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null," id "),(0,l._)("th",null," Name "),(0,l._)("th",null," Online "),(0,l._)("th",null," Description "),(0,l._)("th",null," Edit ")])],-1))),B={class:"border_style"},G={class:"border_style"},F={class:"border_style"},J={class:"border_style"};function Q(e,t,o,s,a,r){const i=(0,l.up)("v-text-field"),n=(0,l.up)("v-spacer"),d=(0,l.up)("v-btn"),u=(0,l.up)("v-card-actions"),c=(0,l.up)("v-card"),_=(0,l.up)("v-dialog"),m=(0,l.up)("v-pagination"),h=(0,l.up)("v-icon"),p=(0,l.up)("v-switch"),g=(0,l.up)("v-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(_,{modelValue:a.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>a.dialog=e),persistent:"","max-width":"600px"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{label:"Description",modelValue:a.description,"onUpdate:modelValue":t[0]||(t[0]=e=>a.description=e)},null,8,["modelValue"]),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n),(0,l.Wm)(d,{color:"blue-darken-1",variant:"text",onClick:r.Close},{default:(0,l.w5)((()=>[(0,l.Uk)(" Close ")])),_:1},8,["onClick"]),(0,l.Wm)(d,{color:"blue-darken-1",variant:"text",onClick:r.Submit},{default:(0,l.w5)((()=>[(0,l.Uk)(" Submit ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(m,{modelValue:a.page,"onUpdate:modelValue":t[2]||(t[2]=e=>a.page=e),length:Math.ceil(a.users_list.length/5)},null,8,["modelValue","length"]),(0,l.Wm)(g,{theme:"light",class:"left"},{default:(0,l.w5)((()=>[K,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.curr_display_users_list,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",B,(0,$.zw)(e.id),1),(0,l._)("td",G,(0,$.zw)(e.name),1),(0,l._)("td",{class:"border_style",style:(0,$.j5)(e.online?"color: lightgreen":"color:pink")}," ● ",4),(0,l._)("td",F,(0,$.zw)(e.description),1),(0,l._)("td",J,[(0,l.Wm)(d,{onClick:t=>r.Add_descrition(e)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-plus ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(d,{onClick:t=>r.Delete_user(e.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-trash-can-outline ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(p,{onChange:t=>r.save_active_status(e),modelValue:e.active_status,"onUpdate:modelValue":t=>e.active_status=t,label:"active",color:"success","hide-details":""},null,8,["onChange","modelValue","onUpdate:modelValue"])])])))),128))])])),_:1})],64)}var X={data(){return{socket:{},users_list:[],borderStyle:{border:"1px solid lightblue"},dialog:!1,description:"",dialog_user:null,curr_display_users_list:[],page:1}},created(){this.socket=this.$store.socket,this.findall_user()},watch:{page:{handler(e,t){this.curr_display_users_list=this.users_list.slice(5*e-5,5*e)},immediate:!0}},mounted(){this.socket.on("user_online",(e=>{let t=this.users_list.find((t=>t.id===e.id));void 0!==t&&(t.online=e.online)})),this.socket.on("user_offline",(e=>{let t=this.users_list.find((t=>t.id===e.id));void 0!==t&&(t.online=e.online)})),this.socket.on("error",(e=>{console.error(e)}))},methods:{async findall_user(){await m.findall_user().then((e=>{this.users_list=e.data})).then((()=>{this.curr_display_users_list=this.users_list.slice(0,5)})).catch((e=>{console.error(e)})),this.curr_display_users_list.unshift({id:0,name:"sample_user",online:!0,active_status:!0})},Delete_user(e){if(confirm("delete?"))if(e!==this.$store.state.userID){var t={id:e};m.delete_user(t).then((()=>{this.users_list=this.users_list.filter((t=>t.id!=e))})).catch((e=>{console.error(e.message)}))}else alert("you can't delete yourself!")},Add_descrition(e){this.descrition=e.descrition,this.dialog=!0,this.dialog_user=e},save_active_status(e){m.edit_user(e).catch((e=>{console.error(e.message)}))},Submit(){null!=this.dialog_user&&(this.dialog_user.description=this.description,m.edit_user(this.dialog_user).then((()=>{this.dialog_user=null,this.dialog=!1,this.description=""})).catch((e=>{console.error(e.message)})))},Close(){this.dialog_user=null,this.dialog=!1,this.descrition=""}}};const ee=(0,p.Z)(X,[["render",Q],["__scopeId","data-v-0bb0f31c"]]);var te=ee;const oe=e=>((0,l.dD)("data-v-52c2b02b"),e=e(),(0,l.Cn)(),e),se=oe((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null," id "),(0,l._)("th",null," Room Name "),(0,l._)("th",null," Welcome Message "),(0,l._)("th",null," Edit ")])],-1)));function le(e,t,o,s,a,r){const i=(0,l.up)("v-btn"),n=(0,l.up)("Dialog"),d=(0,l.up)("v-divider"),u=(0,l.up)("v-pagination"),c=(0,l.up)("v-icon"),_=(0,l.up)("v-switch"),m=(0,l.up)("v-table"),h=(0,l.up)("v-app");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(i,{color:"primary",class:"btn",onClick:t[0]||(t[0]=e=>r.Open_dialog("New",null))},{default:(0,l.w5)((()=>[(0,l.Uk)(" Create New ChatRoom ")])),_:1}),(0,l.Wm)(i,{color:"secondary",class:"btn",onClick:t[1]||(t[1]=e=>r.Open_dialog_chat_record(-1))},{default:(0,l.w5)((()=>[(0,l.Uk)(" View all chatRecord ")])),_:1}),(0,l.Wm)(n,{ref:"vc",onGet_room_info:r.get_chat_room_list},null,8,["onGet_room_info"]),(0,l.Wm)(h,{class:"margintop"},{default:(0,l.w5)((()=>[(0,l.Wm)(d),(0,l.Wm)(u,{modelValue:a.page,"onUpdate:modelValue":t[2]||(t[2]=e=>a.page=e),length:Math.ceil(a.room_list.length/5)},null,8,["modelValue","length"]),(0,l.Wm)(m,{theme:"light",class:"left"},{default:(0,l.w5)((()=>[se,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.curr_display_room_list,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",{style:(0,$.j5)(a.borderStyle)},(0,$.zw)(e.id),5),(0,l._)("td",{style:(0,$.j5)(a.borderStyle)},(0,$.zw)(e.room_name),5),(0,l._)("td",{style:(0,$.j5)(a.borderStyle)},(0,$.zw)(e.welcome_msg),5),(0,l._)("td",{style:(0,$.j5)(a.borderStyle),class:"inline"},[(0,l.Wm)(i,{onClick:t=>r.Open_dialog("Editing",e)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-plus ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(i,{onClick:t=>r.Deleting(e.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-trash-can-outline ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(i,{onClick:t=>r.Open_dialog_chat_record(e.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-comment ")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(_,{onChange:t=>r.save_active_status(e),modelValue:e.active_status,"onUpdate:modelValue":t=>e.active_status=t,label:"active",color:"success","hide-details":""},null,8,["onChange","modelValue","onUpdate:modelValue"])],4)])))),128))])])),_:1})])),_:1})],64)}const ae=e=>((0,l.dD)("data-v-4c25afed"),e=e(),(0,l.Cn)(),e),re={class:"margintop"},ie={class:"text-h5"},ne=ae((()=>(0,l._)("small",null,"required field",-1)));function de(e,t,o,s,a,r){const i=(0,l.up)("v-pagination"),n=(0,l.up)("v-card"),d=(0,l.up)("v-card-title"),u=(0,l.up)("v-text-field"),c=(0,l.up)("v-col"),_=(0,l.up)("v-select"),m=(0,l.up)("v-row"),h=(0,l.up)("v-container"),p=(0,l.up)("v-card-text"),g=(0,l.up)("v-spacer"),w=(0,l.up)("v-btn"),f=(0,l.up)("v-card-actions"),v=(0,l.up)("ChatRecord"),k=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.iD)("div",re,[(0,l.Wm)(m,{justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{modelValue:a.dialog,"onUpdate:modelValue":t[7]||(t[7]=e=>a.dialog=e)},{default:(0,l.w5)((()=>["Editing"==a.room_action?((0,l.wg)(),(0,l.j4)(n,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:a.page,"onUpdate:modelValue":t[0]||(t[0]=e=>a.page=e),length:2,circle:""},null,8,["modelValue"])])),_:1})):(0,l.kq)("",!0),1==a.page?((0,l.wg)(),(0,l.j4)(n,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l._)("span",ie,(0,$.zw)(a.room_action?a.room_action:"New"),1)])),_:1}),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{cols:"10",sm:"6",md:"5"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:"Room Name",required:"",modelValue:a.new_room.room_name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.new_room.room_name=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,{cols:"10",sm:"6",md:"5"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:"Welcome message",hint:"Message that will show to all","persistent-hint":"",required:"",modelValue:a.new_room.welcome_msg,"onUpdate:modelValue":t[2]||(t[2]=e=>a.new_room.welcome_msg=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,{cols:"10",sm:"5"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{items:a.user_list,label:"Admin",required:"",modelValue:a.new_room.room_admin,"onUpdate:modelValue":t[3]||(t[3]=e=>a.new_room.room_admin=e)},null,8,["items","modelValue"])])),_:1}),(0,l.Wm)(c,{cols:"10"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:"Remark",modelValue:a.new_room.remark,"onUpdate:modelValue":t[4]||(t[4]=e=>a.new_room.remark=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,{cols:"10",sm:"5"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{items:["true","false"],label:"Active",hint:"true for active,false for deactive",required:"",modelValue:a.new_room.active_status,"onUpdate:modelValue":t[5]||(t[5]=e=>a.new_room.active_status=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),ne])),_:1}),(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g),(0,l.Wm)(w,{color:"blue-darken-1",variant:"text",onClick:t[6]||(t[6]=e=>a.dialog=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)(" Close ")])),_:1}),(0,l.Wm)(w,{color:"blue-darken-1",variant:"text",onClick:r.Save},{default:(0,l.w5)((()=>[(0,l.Uk)(" Save ")])),_:1},8,["onClick"])])),_:1})])),_:1})):(0,l.kq)("",!0),2==a.page?((0,l.wg)(),(0,l.j4)(n,{key:2},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{RoomID:a.chat_record_room_id},null,8,["RoomID"])])),_:1})):(0,l.kq)("",!0)])),_:1},8,["modelValue"])])),_:1})])}const ue=e=>((0,l.dD)("data-v-6845a54c"),e=e(),(0,l.Cn)(),e),ce=ue((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null," id "),(0,l._)("th",null," Room Name "),(0,l._)("th",null," Publisher "),(0,l._)("th",null," Target "),(0,l._)("th",null," Description "),(0,l._)("th",null," Content "),(0,l._)("th",null," Edit ")])],-1))),_e={class:"border_style"},me={class:"border_style"},he={class:"border_style"},pe={class:"border_style"},ge={class:"border_style"},we={class:"border_style"},fe={class:"border_style"};function ve(e,t,o,s,a,r){const i=(0,l.up)("v-icon"),n=(0,l.up)("v-btn"),d=(0,l.up)("v-table");return(0,l.wg)(),(0,l.j4)(d,{theme:"light",class:"left"},{default:(0,l.w5)((()=>[ce,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.chat_records,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",_e,(0,$.zw)(e.id),1),(0,l._)("td",me,(0,$.zw)(this.find_by_id("Room",e.room_id)),1),(0,l._)("td",he,(0,$.zw)(this.find_by_id("Publisher",e.publisherID)),1),(0,l._)("td",pe,(0,$.zw)(e.chat_target),1),(0,l._)("td",ge,(0,$.zw)(e.description),1),(0,l._)("td",we,(0,$.zw)(e.content),1),(0,l._)("td",fe,[(0,l.Wm)(n,{onClick:t=>r.Deleting(e.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-trash-can-outline ")])),_:1})])),_:2},1032,["onClick"])])])))),128))])])),_:1})}var ke={data(){return{room_lists:[],chat_records:[],user_lists:[]}},components:{Dialog:Ce},created(){this.get_chat_room_list(),this.get_chat_record(),this.findall_user()},props:["RoomID"],methods:{find_by_id(e,t){if("Room"===e){const e=this.room_lists.find((e=>String(e.id)===String(t)));return void 0===e?"not found":e.room_name}if("Publisher"===e){const e=this.user_lists.find((e=>(console.log("publisher",e.id,t),String(e.id)===String(t))));return void 0===e?"not found":e.name}},async findall_user(){await m.findall_user().then((e=>{this.user_lists=e.data})).catch((e=>{console.error(e.message)})),this.user_lists.unshift({id:0,name:"sample_user",online:!0,active_status:!0})},async get_chat_room_list(){await m.get_room_list({}).then((e=>{this.room_lists=e.data})).catch((e=>{console.error(e.message)})),this.room_lists.unshift({id:0,room_name:"sample_room",room_admin:"sample_user",active_status:!0,welcome_msg:"sample chatroom"})},async get_chat_record(){var e={room_id:this.RoomID};await m.get_chat_record(e).then((e=>{this.chat_records=e.data})).catch((e=>{console.error(e.message)})),this.chat_records.unshift({id:0,room_id:0,publisherID:0,chat_target:"everyone",description:"sample",content:"demo"})},Deleting(e){if(confirm("delete?")){var t={id:e};m.delete_chat_record(t).then((e=>{console.log(e.message)})).then((()=>{this.chat_records=this.chat_records.filter((t=>t.id!=e))})).catch((e=>{console.error(e.message)}))}}}};const be=(0,p.Z)(ke,[["render",ve],["__scopeId","data-v-6845a54c"]]);var ye=be,We={data(){return{dialog:!1,user_list:[],new_room:{id:null,room_name:null,welcome_msg:null,room_admin:null,remark:null,active_status:"true"},room_action:null,page:1,chat_record_room_id:1}},components:{ChatRecord:ye},created(){this.findall_user()},watch:{new_room:{handler(e,t){"true"===e.active_status&&(e.active_status=!0),"false"===e.active_status&&(e.active_status=!1)},deep:!0}},methods:{findall_user(){m.findall_user().then((e=>{this.user_list=e.data.map((e=>e.name))})).catch((e=>{console.error(e.message)}))},open_dialog(e,t){this.new_room={...t},this.room_action=e,"New"===e&&delete this.new_room.id,this.page=1,this.dialog=!0},open_dialog_chat_record(e){this.chat_record_room_id=e,this.dialog=!0,this.page=2},Save(){this.dialog=!1,("New"===this.room_action?m.create_chatroom(this.new_room):m.edit_chatroom(this.new_room)).then((e=>{this.$emit("get_room_info")})).catch((e=>{console.error(e.message)}))}}};const De=(0,p.Z)(We,[["render",de],["__scopeId","data-v-4c25afed"]]);var Ce=De,Ue={data(){return{room_list:[],borderStyle:{border:"1px solid lightgreen"},dialog_action:"",room_prototype:{id:"",room_name:"",welcome_msg:"",room_admin:"",remark:"",active_status:""},target_room:{},curr_display_room_list:[],page:1}},components:{Dialog:Ce},created(){this.get_chat_room_list()},watch:{page:{handler(e,t){this.curr_display_room_list=this.room_list.slice(10*e-10,10*e)},immediate:!0}},methods:{async get_chat_room_list(){await m.get_room_list({}).then((e=>{this.room_list=e.data})).then((()=>{this.curr_display_room_list=this.room_list.slice(0,10)})).catch((e=>{console.error(e.message)})),this.curr_display_room_list.unshift({id:0,room_name:"sample_room",rood_admin:"sample_user",active_status:!0,welcome_msg:"sample chatroom"})},Open_dialog(e,t){this.$refs.vc.open_dialog(e,"New"===e?this.room_prototype:t)},Open_dialog_chat_record(e){this.$refs.vc.open_dialog_chat_record(e)},Deleting(e){confirm("delete the chatroom?")&&m.remove_chatroom({room_id:e}).then((e=>{this.get_chat_room_list()})).catch((e=>{console.error(e.message)}))},save_active_status(e){m.edit_chatroom(e).catch((e=>{console.error(e.message)}))}}};const Ve=(0,p.Z)(Ue,[["render",le],["__scopeId","data-v-52c2b02b"]]);var Ie=Ve;const $e=e=>((0,l.dD)("data-v-f6e0c55e"),e=e(),(0,l.Cn)(),e),je=$e((()=>(0,l._)("br",null,null,-1))),Se=$e((()=>(0,l._)("br",null,null,-1))),xe=$e((()=>(0,l._)("div",{class:"danger-alert"},null,-1))),Re=$e((()=>(0,l._)("br",null,null,-1)));function Oe(e,t,o,s,a,r){const i=(0,l.up)("v-text-field"),n=(0,l.up)("v-icon"),d=(0,l.up)("v-btn"),u=(0,l.up)("panel");return(0,l.wg)(),(0,l.j4)(u,{title:"Registration"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{label:"username",modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),class:"input"},null,8,["modelValue"]),je,(0,l.Wm)(i,{label:"Password",type:r.pw_type,modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),class:"input"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"right",onClick:r.toggle_pw_view},{default:(0,l.w5)((()=>[(0,l.Uk)(" mdi-eye-outline ")])),_:1},8,["onClick"])])),_:1},8,["type","modelValue"]),Se,xe,Re,(0,l.Wm)(d,{dark:"",class:"btn",onClick:r.Register},{default:(0,l.w5)((()=>[(0,l.Uk)(" Register ")])),_:1},8,["onClick"])])),_:1})}var ze={data(){return{username:"",password:"",pw_view:!1}},components:{panel:O},computed:{pw_type(){return this.pw_view?"text":"password"}},methods:{Register(){m.Register({name:this.username,password:this.password}).then((e=>{this.$router.push({path:"/"})})).catch((e=>{console.error(e.message)}))},toggle_pw_view(){this.pw_view=!this.pw_view}}};const qe=(0,p.Z)(ze,[["render",Oe],["__scopeId","data-v-f6e0c55e"]]);var Le=qe;const Te=[{path:"/",name:"Login_page",component:L},{path:"/chatroom_page",name:"chatroom",component:M},{path:"/user_page",name:"user",component:te},{path:"/room_list_page",name:"room_list",component:Ie},{path:"/registration_page",name:"registration",component:Le},{path:"/home",name:"Home",component:N},{path:"/:catchAll(.*)",redirect:"/"}],He=(0,y.p7)({history:(0,y.PO)(),routes:Te});He.beforeEach(((e,t,o)=>{"/"!==e.path&&"/registration"!==e.path||!c.state.loginStatus?o():He.push("/home")}));var Pe=He,Ze=(o(9773),o(8957)),Ne=o(1850),Ae=o(8600),Ee=o(6526),Me=o(65);const Ye=(0,Ze.Rd)({components:Ne,directives:Ae,icons:{defaultSet:"mdi",sets:{icon1:Ee}}}),Ke=(0,Me.MT)(c);(0,s.ri)(b).use(Ye).use(Ke).use(Pe).mount("#app")}},t={};function o(s){var l=t[s];if(void 0!==l)return l.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,s,l,a){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],l=e[u][1],a=e[u][2];for(var i=!0,n=0;n<s.length;n++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](s[n])}))?s.splice(n--,1):(i=!1,a<r&&(r=a));if(i){e.splice(u--,1);var d=l();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,l,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,a,r=s[0],i=s[1],n=s[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)o.o(i,l)&&(o.m[l]=i[l]);if(n)var u=n(o)}for(t&&t(s);d<r.length;d++)a=r[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},s=self["webpackChunkonline_chat_v3"]=self["webpackChunkonline_chat_v3"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(5245)}));s=o.O(s)})();
//# sourceMappingURL=app.137cffa8.js.map
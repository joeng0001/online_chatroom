(function(){"use strict";var e={7413:function(e,t,o){var l=o(9242),s=o(3396);const a={id:"app"};function n(e,t,o,l,n,r){const i=(0,s.up)("chat_header"),d=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(i),(0,s.Wm)(d)])}function r(e,t,o,l,a,n){const r=(0,s.up)("v-btn"),i=(0,s.up)("v-toolbar-items"),d=(0,s.up)("v-spacer"),u=(0,s.up)("v-toolbar");return(0,s.wg)(),(0,s.j4)(u,{color:"cyan-lighten-3",align:""},{default:(0,s.w5)((()=>[(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[e.$store.state.loginStatus?((0,s.wg)(),(0,s.j4)(r,{key:0,color:"blue",to:{name:"Home"}},{default:(0,s.w5)((()=>[(0,s.Uk)(" Home Page ")])),_:1})):((0,s.wg)(),(0,s.j4)(r,{key:1,color:"blue",to:{name:"Login_page"}},{default:(0,s.w5)((()=>[(0,s.Uk)(" Login Page ")])),_:1}))])),_:1}),(0,s.Wm)(i,{style:{"padding-left":"200px"}},{default:(0,s.w5)((()=>[e.$store.state.loginStatus?((0,s.wg)(),(0,s.j4)(r,{key:0,to:{name:"user"},class:"light"},{default:(0,s.w5)((()=>[(0,s.Uk)(" user_list ")])),_:1})):(0,s.kq)("",!0),e.$store.state.loginStatus?((0,s.wg)(),(0,s.j4)(r,{key:1,to:{name:"room_list"},class:"light"},{default:(0,s.w5)((()=>[(0,s.Uk)(" room_list ")])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(d)])),_:1}),(0,s.Wm)(d),(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[e.$store.state.loginStatus?((0,s.wg)(),(0,s.j4)(r,{key:0,color:"#3700B3",depressed:"",style:{right:"0px"},onClick:n.logout},{default:(0,s.w5)((()=>[(0,s.Uk)(" log out ")])),_:1},8,["onClick"])):(0,s.kq)("",!0)])),_:1})])),_:1})}o(7658);var i=o(4311),d=i.Z.create({baseURL:"http://localhost:8089/",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});const u={strict:!0,plugins:[],state:{token:null,userID:null,loginStatus:!1},socket:{},mutations:{setToken(e,t){e.token=t,e.loginStatus=!!t,localStorage.setItem("token",t)},setUserID(e,t){e.userID=t,localStorage.setItem("userID",t)},setLoginStatus(e,t){e.loginStatus=t,localStorage.setItem("status",t)}},actions:{setToken({commit:e},t){e("setToken",t)},setUserID({commit:e},t){e("setUserID",t)},setLoginStatus({commit:e},t){e("setLoginStatus",t)}}};var c=u;class _{get_chat_record(e){return e.jwt=c.state.token,d.put("/chat_record",e)}add_chat_record(e){return e.jwt=c.state.token,d.post("/chat_record",e)}delete_chat_record(e){return e.jwt=c.state.token,d.put("/chat_record_deletion",e)}findall_user(){return d.get("/user")}delete_user(e){return e.jwt=c.state.token,d.post("/user",e)}edit_user(e){return e.jwt=c.state.token,d.post("/user_edition",e)}get_room_list(){return d.get("/chat_room")}login(e){return d.post("/login",e)}Register(e){return d.post("/register",e)}create_chatroom(e){return e.jwt=c.state.token,d.post("/chat_room_creation",e)}edit_chatroom(e){return e.jwt=c.state.token,d.post("/chat_room_edition",e)}remove_chatroom(e){return e.jwt=c.state.token,d.put("/chat_room",e)}user_offline(e){return e.jwt=c.state.token,d.put("/user",e)}add_online_account(e){return e.jwt=c.state.token,d.put("login",e)}}var m=new _,h={methods:{logout(){var e={id:this.$store.state.userID,online:!1};this.$store.socket.emit("user_offline",e),console.log("logging out"),m.user_offline({id:this.$store.state.userID}).then((e=>{console.log(e.message)})).catch((e=>{console.log(e.message)})),this.$store.socket.close(),this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$store.dispatch("setLoginStatus",!1),this.$router.push({path:"/"})}}},p=o(89);const g=(0,p.Z)(h,[["render",r],["__scopeId","data-v-3aa20d0f"]]);var w=g,f=o(2066),v={name:"App",components:{chat_header:w},beforeCreate(){this.$store.dispatch("setToken",localStorage.getItem("token")),this.$store.dispatch("setUserID",parseInt(localStorage.getItem("userID"))),this.$store.dispatch("setLoginStatus","true"==localStorage.getItem("status")),this.$store.socket=(0,f.io)("http://localhost:8089");const e={id:this.$store.state.userID};m.add_online_account(e).then((e=>{console.log(e.message)})).catch((e=>{console.log(e.message)}))},created(){window.addEventListener("beforeunload",this.leaving)},methods:{leaving(){this.$store.state.loginStatus&&(m.user_offline({id:this.$store.state.userID}).then((e=>{console.log(e.message)})).catch((e=>{console.log(e.message)})),this.$store.socket.close())}}};const k=(0,p.Z)(v,[["render",n]]);var b=k,y=o(2483);const W=e=>((0,s.dD)("data-v-e6c5fc6e"),e=e(),(0,s.Cn)(),e),D=W((()=>(0,s._)("br",null,null,-1))),V=W((()=>(0,s._)("br",null,null,-1))),C=W((()=>(0,s._)("div",{class:"danger-alert"},null,-1))),U=W((()=>(0,s._)("br",null,null,-1)));function I(e,t,o,l,a,n){const r=(0,s.up)("v-text-field"),i=(0,s.up)("v-icon"),d=(0,s.up)("v-btn"),u=(0,s.up)("panel");return(0,s.wg)(),(0,s.j4)(u,{title:"Login",style:{}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{label:"username",modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),class:"input"},null,8,["modelValue"]),D,(0,s.Wm)(r,{label:"Password",type:n.pw_type,modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),class:"input"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{class:"right",onClick:n.toggle_pw_view},{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-eye-outline ")])),_:1},8,["onClick"])])),_:1},8,["type","modelValue"]),V,C,U,(0,s.Wm)(d,{class:"btn",onClick:n.login},{default:(0,s.w5)((()=>[(0,s.Uk)(" Login ")])),_:1},8,["onClick"]),(0,s.Uk)("   "),(0,s.Wm)(d,{class:"btn",onClick:n.to_register},{default:(0,s.w5)((()=>[(0,s.Uk)(" Registration ")])),_:1},8,["onClick"])])),_:1})}var $=o(7139);const j={class:"box"};function S(e,t,o,l,a,n){const r=(0,s.up)("v-toolbar-title"),i=(0,s.up)("v-toolbar");return(0,s.wg)(),(0,s.iD)("div",j,[(0,s.Wm)(i,{class:"toolbar"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,$.zw)(o.title),1)])),_:1})])),_:1}),(0,s._)("div",null,[(0,s.WI)(e.$slots,"default",{},(()=>[(0,s.Uk)(" No Centent Defined ")]),!0)])])}var x={props:["title"]};const O=(0,p.Z)(x,[["render",S],["__scopeId","data-v-6138f4d3"]]);var R=O,z={name:"Login",data(){return{msg:"Welcome to Your Vue.js App",username:"",password:"",pw_view:!1}},components:{panel:R},computed:{pw_type(){return this.pw_view?"text":"password"}},methods:{login(){m.login({name:this.username,password:this.password}).then((e=>{this.$store.dispatch("setToken",e.data.token),this.$store.dispatch("setUserID",e.data.user_id),this.$store.dispatch("setLoginStatus",!0),this.$store.socket=(0,f.io)("http://localhost:8089"),this.$router.push("/home")})).then((()=>{var e={id:this.$store.state.userID,online:!0,jwt:this.$store.state.toekn};this.$store.socket.emit("user_online",e),this.$store.socket.on("error",(e=>{console.log(e)}))})).catch((e=>{console.log(e.message),console.log("login fail")}))},toggle_pw_view(){this.pw_view=!this.pw_view},to_register(){this.$router.push("/registration")}}};const q=(0,p.Z)(z,[["render",I],["__scopeId","data-v-e6c5fc6e"]]);var T=q;function H(e,t,o,a,n,r){const i=(0,s.up)("Home"),d=(0,s.up)("v-card-subtitle"),u=(0,s.up)("v-card-text"),c=(0,s.up)("v-card"),_=(0,s.up)("v-col"),m=(0,s.up)("v-row"),h=(0,s.up)("v-container"),p=(0,s.up)("v-icon"),g=(0,s.up)("v-text-field");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(i,{class:"room_list"}),(0,s.Wm)(h,{class:"container",id:"container"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.messages,(e=>((0,s.wg)(),(0,s.j4)(m,{key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[e.publisherID!==this.$store.state.userID?((0,s.wg)(),(0,s.j4)(c,{key:0,class:"card"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,$.zw)(r.find_by_id(e.publisherID)),1)])),_:2},1024),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,$.zw)(e.content),1)])),_:2},1024)])),_:2},1024)):(0,s.kq)("",!0)])),_:2},1024),(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[e.publisherID===this.$store.state.userID?((0,s.wg)(),(0,s.j4)(c,{key:0,class:"card"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,$.zw)(r.find_by_id(e.publisherID)),1)])),_:2},1024),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,$.zw)(e.content),1)])),_:2},1024)])),_:2},1024)):(0,s.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,s._)("div",null,[(0,s.Wm)(g,{placeholder:"input there",modelValue:n.chat,"onUpdate:modelValue":t[1]||(t[1]=e=>n.chat=e),onKeypress:(0,l.D2)(r.send_chat,["enter"]),class:"chat_box"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{onClick:t[0]||(t[0]=e=>r.send_chat()),class:"btn","x-large":""},{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-arrow-right-bold ")])),_:1})])),_:1},8,["modelValue","onKeypress"])])],64)}function L(e,t,o,l,a,n){const r=(0,s.up)("v-pagination"),i=(0,s.up)("v-card"),d=(0,s.up)("v-divider"),u=(0,s.up)("v-col"),c=(0,s.up)("v-row"),_=(0,s.up)("v-container");return(0,s.wg)(),(0,s.j4)(_,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{modelValue:a.page,"onUpdate:modelValue":t[0]||(t[0]=e=>a.page=e),length:Math.ceil(a.room_list.length/5)},null,8,["modelValue","length"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.curr_display_room_list,(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[e.active_status?((0,s.wg)(),(0,s.j4)(i,{key:0,title:`${e.id}`,subtitle:`${e.room_admin}`,text:`${e.welcome_msg}`,to:{name:"chatroom",query:{room_id:e.id}},class:"card"},null,8,["title","subtitle","text","to"])):(0,s.kq)("",!0),(0,s.Wm)(d)])),_:2},1024)])),_:2},1024)))),128))])),_:1})}var P={data(){return{room_list:[],curr_display_room_list:[],page:1}},created(){this.get_room_list()},mounted(){},watch:{page:{handler(e,t){this.curr_display_room_list=this.room_list.slice(5*e-5,5*e)},immediate:!0}},methods:{get_room_list(){var e={room_id:this.room_id};m.get_room_list(e).then((e=>{this.room_list=e.data,this.curr_display_room_list=this.room_list.slice(0,5)})).catch((e=>{console.log(e.message)}))}}};const Z=(0,p.Z)(P,[["render",L],["__scopeId","data-v-48b178f6"]]);var N=Z,E={data(){return{messages:[],chat:"",socket:null,room_id:1,user_lists:[]}},components:{Home:N},created(){this.room_id=this.$route.query.room_id,this.get_chat_record(this.room_id),this.findall_user(),this.socket=this.$store.socket},mounted(){this.socket.on("message",(e=>{e.room_id===this.room_id&&this.messages.push(e),e.publisherID===this.$store.state.userID&&this.$nextTick((()=>{var e=document.getElementById("container");e.scrollTop=e.scrollHeight}))}))},watch:{"$route.query.room_id":{handler(e,t){this.room_id=e,this.get_chat_record(this.room_id)},deep:!0}},computed:{},methods:{find_by_id(e){const t=this.user_lists.find((t=>t.id===e));return void 0===t?"anonymous":t.name},findall_user(){m.findall_user().then((e=>{this.user_lists=e.data})).catch((e=>{console.log(e.message)}))},get_chat_record(e){var t={room_id:e};m.get_chat_record(t).then((e=>{this.messages=e.data})).catch((e=>{console.log(e.message)}))},send_chat(){var e={content:this.chat,publisherID:this.$store.state.userID,room_id:this.room_id,chat_target:"anyone",description:"my first chat"};m.add_chat_record(e).then((t=>{e.type="new_chat",this.socket.emit("message",e),this.chat=""})).catch((e=>{console.log(e.message)}))}}};const M=(0,p.Z)(E,[["render",H],["__scopeId","data-v-66fd664c"]]);var Y=M;const A=e=>((0,s.dD)("data-v-ac49d508"),e=e(),(0,s.Cn)(),e),K=A((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null," id "),(0,s._)("th",null," Name "),(0,s._)("th",null," Online "),(0,s._)("th",null," Description "),(0,s._)("th",null," Edit ")])],-1))),B={class:"border_style"},G={class:"border_style"},F={class:"border_style"},J={class:"border_style"};function Q(e,t,o,l,a,n){const r=(0,s.up)("v-text-field"),i=(0,s.up)("v-spacer"),d=(0,s.up)("v-btn"),u=(0,s.up)("v-card-actions"),c=(0,s.up)("v-card"),_=(0,s.up)("v-dialog"),m=(0,s.up)("v-pagination"),h=(0,s.up)("v-icon"),p=(0,s.up)("v-switch"),g=(0,s.up)("v-table");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(_,{modelValue:a.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>a.dialog=e),persistent:"","max-width":"600px"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{label:"Description",modelValue:a.description,"onUpdate:modelValue":t[0]||(t[0]=e=>a.description=e)},null,8,["modelValue"]),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i),(0,s.Wm)(d,{color:"blue-darken-1",variant:"text",onClick:n.Close},{default:(0,s.w5)((()=>[(0,s.Uk)(" Close ")])),_:1},8,["onClick"]),(0,s.Wm)(d,{color:"blue-darken-1",variant:"text",onClick:n.Submit},{default:(0,s.w5)((()=>[(0,s.Uk)(" Submit ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(m,{modelValue:a.page,"onUpdate:modelValue":t[2]||(t[2]=e=>a.page=e),length:Math.ceil(a.users_list.length/5)},null,8,["modelValue","length"]),(0,s.Wm)(g,{theme:"light",class:"left"},{default:(0,s.w5)((()=>[K,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.curr_display_users_list,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",B,(0,$.zw)(e.id),1),(0,s._)("td",G,(0,$.zw)(e.name),1),(0,s._)("td",{class:"border_style",style:(0,$.j5)(e.online?"color: lightgreen":"color:pink")}," ● ",4),(0,s._)("td",F,(0,$.zw)(e.description),1),(0,s._)("td",J,[(0,s.Wm)(d,{onClick:t=>n.Add_descrition(e)},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-plus ")])),_:1})])),_:2},1032,["onClick"]),(0,s.Wm)(d,{onClick:t=>n.Delete_user(e.id)},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-trash-can-outline ")])),_:1})])),_:2},1032,["onClick"]),(0,s.Wm)(p,{onChange:t=>n.save_active_status(e),modelValue:e.active_status,"onUpdate:modelValue":t=>e.active_status=t,label:"active",color:"success","hide-details":""},null,8,["onChange","modelValue","onUpdate:modelValue"])])])))),128))])])),_:1})],64)}var X={data(){return{socket:{},users_list:[],borderStyle:{border:"1px solid lightblue"},dialog:!1,description:"",dialog_user:null,curr_display_users_list:[],page:1}},created(){this.socket=this.$store.socket,this.findall_user()},watch:{page:{handler(e,t){this.curr_display_users_list=this.users_list.slice(5*e-5,5*e)},immediate:!0}},mounted(){this.socket.on("user_online",(e=>{console.log(e),console.log("socket online");let t=this.users_list.find((t=>t.id===e.id));void 0!==t&&(t.online=e.online)})),this.socket.on("user_offline",(e=>{console.log(e),console.log("socket offline");let t=this.users_list.find((t=>t.id===e.id));void 0!==t&&(t.online=e.online)})),this.socket.on("error",(e=>{console.log(e)}))},methods:{findall_user(){m.findall_user().then((e=>{this.users_list=e.data})).then((()=>{this.curr_display_users_list=this.users_list.slice(0,5)})).catch((e=>{console.log(e)}))},Delete_user(e){if(confirm("delete?"))if(e!==this.$store.state.userID){var t={id:e};m.delete_user(t).then((e=>{console.log(e.message)})).then((()=>{this.users_list=this.users_list.filter((t=>t.id!=e))})).catch((e=>{console.log(e.message)}))}else alert("you can't delete yourself!")},Add_descrition(e){this.descrition=e.descrition,this.dialog=!0,this.dialog_user=e},save_active_status(e){m.edit_user(e).then((e=>{console.log(e.message)}))},Submit(){null!=this.dialog_user&&(this.dialog_user.description=this.description,m.edit_user(this.dialog_user).then((e=>{console.log(e.message)})).then((()=>{this.dialog_user=null,this.dialog=!1,this.description=""})).catch((e=>{console.log(e.message)})))},Close(){this.dialog_user=null,this.dialog=!1,this.descrition=""}}};const ee=(0,p.Z)(X,[["render",Q],["__scopeId","data-v-ac49d508"]]);var te=ee;const oe=e=>((0,s.dD)("data-v-a2c6b30e"),e=e(),(0,s.Cn)(),e),le=oe((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null," id "),(0,s._)("th",null," Room Name "),(0,s._)("th",null," Welcome Message "),(0,s._)("th",null," Edit ")])],-1)));function se(e,t,o,l,a,n){const r=(0,s.up)("v-btn"),i=(0,s.up)("Dialog"),d=(0,s.up)("v-divider"),u=(0,s.up)("v-pagination"),c=(0,s.up)("v-icon"),_=(0,s.up)("v-switch"),m=(0,s.up)("v-table"),h=(0,s.up)("v-app");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r,{color:"primary",class:"btn",onClick:t[0]||(t[0]=e=>n.Open_dialog("New",null))},{default:(0,s.w5)((()=>[(0,s.Uk)(" Create New ChatRoom ")])),_:1}),(0,s.Wm)(r,{color:"secondary",class:"btn",onClick:t[1]||(t[1]=e=>n.Open_dialog_chat_record(-1))},{default:(0,s.w5)((()=>[(0,s.Uk)(" View all chatrecord ")])),_:1}),(0,s.Wm)(i,{ref:"vc",onGet_room_info:n.get_chat_room_list},null,8,["onGet_room_info"]),(0,s.Wm)(h,{class:"margintop"},{default:(0,s.w5)((()=>[(0,s.Wm)(d),(0,s.Wm)(u,{modelValue:a.page,"onUpdate:modelValue":t[2]||(t[2]=e=>a.page=e),length:Math.ceil(a.room_list.length/5)},null,8,["modelValue","length"]),(0,s.Wm)(m,{theme:"light",class:"left"},{default:(0,s.w5)((()=>[le,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.curr_display_room_list,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",{style:(0,$.j5)(a.borderStyle)},(0,$.zw)(e.id),5),(0,s._)("td",{style:(0,$.j5)(a.borderStyle)},(0,$.zw)(e.room_name),5),(0,s._)("td",{style:(0,$.j5)(a.borderStyle)},(0,$.zw)(e.welcome_msg),5),(0,s._)("td",{style:(0,$.j5)(a.borderStyle),class:"inline"},[(0,s.Wm)(r,{onClick:t=>n.Open_dialog("Editing",e)},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-plus ")])),_:1})])),_:2},1032,["onClick"]),(0,s.Wm)(r,{onClick:t=>n.Deleting(e.id)},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-trash-can-outline ")])),_:1})])),_:2},1032,["onClick"]),(0,s.Wm)(r,{onClick:t=>n.Open_dialog_chat_record(e.id)},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-comment ")])),_:1})])),_:2},1032,["onClick"]),(0,s.Wm)(_,{onChange:t=>n.save_active_status(e),modelValue:e.active_status,"onUpdate:modelValue":t=>e.active_status=t,label:"active",color:"success","hide-details":""},null,8,["onChange","modelValue","onUpdate:modelValue"])],4)])))),128))])])),_:1})])),_:1})],64)}const ae=e=>((0,s.dD)("data-v-f6949b46"),e=e(),(0,s.Cn)(),e),ne={class:"margintop"},re={class:"text-h5"},ie=ae((()=>(0,s._)("small",null,"required field",-1)));function de(e,t,o,l,a,n){const r=(0,s.up)("v-pagination"),i=(0,s.up)("v-card"),d=(0,s.up)("v-card-title"),u=(0,s.up)("v-text-field"),c=(0,s.up)("v-col"),_=(0,s.up)("v-select"),m=(0,s.up)("v-row"),h=(0,s.up)("v-container"),p=(0,s.up)("v-card-text"),g=(0,s.up)("v-spacer"),w=(0,s.up)("v-btn"),f=(0,s.up)("v-card-actions"),v=(0,s.up)("ChatRecord"),k=(0,s.up)("v-dialog");return(0,s.wg)(),(0,s.iD)("div",ne,[(0,s.Wm)(m,{justify:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{modelValue:a.dialog,"onUpdate:modelValue":t[7]||(t[7]=e=>a.dialog=e)},{default:(0,s.w5)((()=>["Editing"==a.room_action?((0,s.wg)(),(0,s.j4)(i,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{modelValue:a.page,"onUpdate:modelValue":t[0]||(t[0]=e=>a.page=e),length:2,circle:""},null,8,["modelValue"])])),_:1})):(0,s.kq)("",!0),1==a.page?((0,s.wg)(),(0,s.j4)(i,{key:1},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s._)("span",re,(0,$.zw)(a.room_action?a.room_action:"New"),1)])),_:1}),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{cols:"10",sm:"6",md:"5"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{label:"Room Name",required:"",modelValue:a.new_room.room_name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.new_room.room_name=e)},null,8,["modelValue"])])),_:1}),(0,s.Wm)(c,{cols:"10",sm:"6",md:"5"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{label:"Welcome message",hint:"Message that will show to all","persistent-hint":"",required:"",modelValue:a.new_room.welcome_msg,"onUpdate:modelValue":t[2]||(t[2]=e=>a.new_room.welcome_msg=e)},null,8,["modelValue"])])),_:1}),(0,s.Wm)(c,{cols:"10",sm:"5"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{items:a.user_list,label:"Admin",required:"",modelValue:a.new_room.room_admin,"onUpdate:modelValue":t[3]||(t[3]=e=>a.new_room.room_admin=e)},null,8,["items","modelValue"])])),_:1}),(0,s.Wm)(c,{cols:"10"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{label:"Remark",modelValue:a.new_room.remark,"onUpdate:modelValue":t[4]||(t[4]=e=>a.new_room.remark=e)},null,8,["modelValue"])])),_:1}),(0,s.Wm)(c,{cols:"10",sm:"5"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{items:["true","false"],label:"Active",hint:"true for active,false for deactive",required:"",modelValue:a.new_room.active_status,"onUpdate:modelValue":t[5]||(t[5]=e=>a.new_room.active_status=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),ie])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g),(0,s.Wm)(w,{color:"blue-darken-1",variant:"text",onClick:t[6]||(t[6]=e=>a.dialog=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)(" Close ")])),_:1}),(0,s.Wm)(w,{color:"blue-darken-1",variant:"text",onClick:n.Save},{default:(0,s.w5)((()=>[(0,s.Uk)(" Save ")])),_:1},8,["onClick"])])),_:1})])),_:1})):(0,s.kq)("",!0),2==a.page?((0,s.wg)(),(0,s.j4)(i,{key:2},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{RoomID:a.chat_record_room_id},null,8,["RoomID"])])),_:1})):(0,s.kq)("",!0)])),_:1},8,["modelValue"])])),_:1})])}const ue=e=>((0,s.dD)("data-v-2fe96e22"),e=e(),(0,s.Cn)(),e),ce=ue((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null," id "),(0,s._)("th",null," Room Name "),(0,s._)("th",null," Publisher "),(0,s._)("th",null," Target "),(0,s._)("th",null," Description "),(0,s._)("th",null," Content "),(0,s._)("th",null," Edit ")])],-1))),_e={class:"border_style"},me={class:"border_style"},he={class:"border_style"},pe={class:"border_style"},ge={class:"border_style"},we={class:"border_style"},fe={class:"border_style"};function ve(e,t,o,l,a,n){const r=(0,s.up)("v-icon"),i=(0,s.up)("v-btn"),d=(0,s.up)("v-table");return(0,s.wg)(),(0,s.j4)(d,{theme:"light",class:"left"},{default:(0,s.w5)((()=>[ce,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.chat_records,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",_e,(0,$.zw)(e.id),1),(0,s._)("td",me,(0,$.zw)(this.find_by_id("Room",e.room_id)),1),(0,s._)("td",he,(0,$.zw)(this.find_by_id("Publisher",e.publisherID)),1),(0,s._)("td",pe,(0,$.zw)(e.chat_target),1),(0,s._)("td",ge,(0,$.zw)(e.description),1),(0,s._)("td",we,(0,$.zw)(e.content),1),(0,s._)("td",fe,[(0,s.Wm)(i,{onClick:t=>n.Deleting(e.id)},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-trash-can-outline ")])),_:1})])),_:2},1032,["onClick"])])])))),128))])])),_:1})}var ke={data(){return{room_lists:[],chat_records:[],user_lists:[]}},components:{Dialog:Ve},created(){this.get_chat_room_list(),this.get_chat_record(),this.findall_user()},watch:{},props:["RoomID"],methods:{find_by_id(e,t){if("Room"===e){const e=this.room_lists.find((e=>e.id===t));return void 0===e?"not found":e.room_name}if("Publisher"===e){const e=this.user_lists.find((e=>e.id===t));return void 0===e?"not found":e.name}},findall_user(){m.findall_user().then((e=>{this.user_lists=e.data})).catch((e=>{console.log(e.message)}))},get_chat_room_list(){m.get_room_list().then((e=>{this.room_lists=e.data})).catch((e=>{console.log(e.message)}))},get_chat_record(){var e={room_id:this.RoomID};m.get_chat_record(e).then((e=>{this.chat_records=e.data})).catch((e=>{console.log(e.message)}))},Deleting(e){if(confirm("delete?")){var t={id:e};m.delete_chat_record(t).then((e=>{console.log(e.message)})).then((()=>{this.chat_records=this.chat_records.filter((t=>t.id!=e))})).catch((e=>{console.log(e.message)}))}}}};const be=(0,p.Z)(ke,[["render",ve],["__scopeId","data-v-2fe96e22"]]);var ye=be,We={data(){return{dialog:!1,user_list:[],new_room:{id:null,room_name:null,welcome_msg:null,room_admin:null,remark:null,active_status:"true"},room_action:null,page:1,chat_record_room_id:1}},components:{ChatRecord:ye},created(){this.findall_user()},mounted(){},watch:{new_room:{handler(e,t){"true"===e.active_status&&(e.active_status=!0),"false"==e.active_status&&(e.active_status=!1)},deep:!0}},methods:{findall_user(){m.findall_user().then((e=>{this.user_list=e.data.map((e=>e.name))}))},open_dialog(e,t){this.new_room={...t},this.room_action=e,"New"===e&&delete this.new_room.id,this.dialog=!0},open_dialog_chat_record(e){this.chat_record_room_id=e,this.dialog=!0,this.page=2},Save(){this.dialog=!1,("New"===this.room_action?m.create_chatroom(this.new_room):m.edit_chatroom(this.new_room)).then((e=>{console.log(e.message),this.$emit("get_room_info")})).catch((e=>{console.log(e.message)}))}}};const De=(0,p.Z)(We,[["render",de],["__scopeId","data-v-f6949b46"]]);var Ve=De,Ce={data(){return{room_list:[],borderStyle:{border:"1px solid lightgreen"},dialog_action:"",room_prototype:{id:"",room_name:"",welcome_msg:"",room_admin:"",remark:"",active_status:""},target_room:{},curr_display_room_list:[],page:1}},components:{Dialog:Ve},created(){this.get_chat_room_list()},watch:{page:{handler(e,t){this.curr_display_room_list=this.room_list.slice(10*e-10,10*e)},immediate:!0}},methods:{get_chat_room_list(){m.get_room_list().then((e=>{this.room_list=e.data})).then((()=>{this.curr_display_room_list=this.room_list.slice(0,10)})).catch((e=>{console.log(e.message)}))},Open_dialog(e,t){this.$refs.vc.open_dialog(e,"New"===e?this.room_prototype:t)},Open_dialog_chat_record(e){this.$refs.vc.open_dialog_chat_record(e)},Deleting(e){confirm("delete the chatroom?")&&m.remove_chatroom({room_id:e}).then((e=>{console.log(e)})).then((()=>{this.get_chat_room_list()})).catch((e=>{console.log(e.message)}))},save_active_status(e){m.edit_chatroom(e).then((e=>{console.log("update success")})).catch((e=>{console.log(e.message)}))}}};const Ue=(0,p.Z)(Ce,[["render",se],["__scopeId","data-v-a2c6b30e"]]);var Ie=Ue;const $e=e=>((0,s.dD)("data-v-3829ebc0"),e=e(),(0,s.Cn)(),e),je=$e((()=>(0,s._)("br",null,null,-1))),Se=$e((()=>(0,s._)("br",null,null,-1))),xe=$e((()=>(0,s._)("div",{class:"danger-alert"},null,-1))),Oe=$e((()=>(0,s._)("br",null,null,-1)));function Re(e,t,o,l,a,n){const r=(0,s.up)("v-text-field"),i=(0,s.up)("v-icon"),d=(0,s.up)("v-btn"),u=(0,s.up)("panel");return(0,s.wg)(),(0,s.j4)(u,{title:"Registration"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{label:"username",modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),class:"input"},null,8,["modelValue"]),je,(0,s.Wm)(r,{label:"Password",type:n.pw_type,modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),class:"input"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{class:"right",onClick:n.toggle_pw_view},{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-eye-outline ")])),_:1},8,["onClick"])])),_:1},8,["type","modelValue"]),Se,xe,Oe,(0,s.Wm)(d,{dark:"",class:"btn",onClick:n.Register},{default:(0,s.w5)((()=>[(0,s.Uk)(" Register ")])),_:1},8,["onClick"])])),_:1})}var ze={data(){return{username:"",password:"",pw_view:!1}},components:{panel:R},computed:{pw_type(){return this.pw_view?"text":"password"}},methods:{Register(){m.Register({name:this.username,password:this.password}).then((e=>{this.$router.push({path:"/"}),console.log(e.message)})).catch((e=>{console.log(e.message),alert(e.message,"user name already in use")}))},toggle_pw_view(){this.pw_view=!this.pw_view}}};const qe=(0,p.Z)(ze,[["render",Re],["__scopeId","data-v-3829ebc0"]]);var Te=qe;const He=[{path:"/",name:"Login_page",component:T},{path:"/chatroom",name:"chatroom",component:Y},{path:"/user",name:"user",component:te},{path:"/room_list",name:"room_list",component:Ie},{path:"/registration",name:"registration",component:Te},{path:"/home",name:"Home",component:N}],Le=(0,y.p7)({history:(0,y.PO)(),routes:He});Le.beforeEach(((e,t,o)=>{"/"!==e.path&&"/registration"!==e.path||!c.state.loginStatus?o():Le.push("/home")}));var Pe=Le,Ze=(o(9773),o(8957)),Ne=o(1850),Ee=o(8600),Me=o(6526),Ye=o(65);const Ae=(0,Ze.Rd)({components:Ne,directives:Ee,icons:{defaultSet:"mdi",sets:{icon1:Me}}}),Ke=(0,Ye.MT)(c);(0,l.ri)(b).use(Ae).use(Ke).use(Pe).mount("#app")}},t={};function o(l){var s=t[l];if(void 0!==s)return s.exports;var a=t[l]={exports:{}};return e[l](a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,l,s,a){if(!l){var n=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],a=e[u][2];for(var r=!0,i=0;i<l.length;i++)(!1&a||n>=a)&&Object.keys(o.O).every((function(e){return o.O[e](l[i])}))?l.splice(i--,1):(r=!1,a<n&&(n=a));if(r){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[l,s,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,a,n=l[0],r=l[1],i=l[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(i)var u=i(o)}for(t&&t(l);d<n.length;d++)a=n[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},l=self["webpackChunkonline_chat_v3"]=self["webpackChunkonline_chat_v3"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=o.O(void 0,[998],(function(){return o(7413)}));l=o.O(l)})();
//# sourceMappingURL=app.8f988f1d.js.map